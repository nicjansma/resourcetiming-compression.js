!function(e){"use strict";var t,r;void 0!==e&&(r=(t=e).ResourceTimingDecompression);var E={HOSTNAMES_REVERSED:!0,INITIATOR_TYPES:{other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,navigation:6,image:7,beacon:8,fetch:9,frame:"a",body:"b",input:"c",object:"d",video:"e",audio:"f",source:"g",track:"h",embed:"i",eventsource:"j","early-hints":"k",ping:"l",font:"m"},DIMENSION_NAMES:{height:0,width:1,y:2,x:3,naturalHeight:4,naturalWidth:5},SCRIPT_ATTRIBUTES:{scriptAsync:1,scriptDefer:2,scriptBody:4},REL_TYPES:{prefetch:1,preload:2,prerender:3,stylesheet:4},getRevMap:function(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[e[r]]=r);return t}};E.REV_INITIATOR_TYPES=E.getRevMap(E.INITIATOR_TYPES),E.REV_DIMENSION_NAMES=E.getRevMap(E.DIMENSION_NAMES),E.REV_SCRIPT_ATTRIBUTES=E.getRevMap(E.SCRIPT_ATTRIBUTES),E.REV_REL_TYPES=E.getRevMap(E.REL_TYPES),E.SPECIAL_DATA_PREFIX="*",E.SPECIAL_DATA_DIMENSION_TYPE="0",E.SPECIAL_DATA_DIMENSION_PREFIX=E.SPECIAL_DATA_PREFIX+E.SPECIAL_DATA_DIMENSION_TYPE,E.SPECIAL_DATA_SIZE_TYPE="1",E.SPECIAL_DATA_SCRIPT_TYPE="2",E.SPECIAL_DATA_SERVERTIMING_TYPE="3",E.SPECIAL_DATA_LINK_ATTR_TYPE="4",E.SPECIAL_DATA_NAMESPACED_TYPE="5",E.SPECIAL_DATA_SERVICE_WORKER_TYPE="6",E.HOSTNAME_REGEX=/^(https?:\/\/)([^/]+)(.*)/,E.SPECIAL_DATA_PROTOCOL="7",E.searchSortedFirst=function(e,t,r){if(!e||0===e.length)return-1;t=(r=r||function(e){return e})(t);for(var n,s=-1,o=e.length;s<o-1;)r(e[n=s+o>>>1])<t?s=n:o=n;return o},E.searchSortedLast=function(e,t,r){if(!e||0===e.length)return-1;t=(r=r||function(e){return e})(t);for(var n,s=-1,o=e.length;s<o-1;)t<r(e[n=s+o>>>1])?o=n:s=n;return s},E.noConflict=function(){return t.ResourceTimingDecompression=r,E},E.decompressResources=function(e,t,r){var n,s=[];for(var o in r=r||"",e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=e[o],a=r+o;if(-1!==a.indexOf("|",a.length-1)&&(a=a.substring(0,a.length-1)),"string"==typeof i){var c=i.split("|");if(0===c.length)continue;n=void 0,this.isDimensionData(c[0])&&(n=this.decompressDimension(c[0]),c=c.splice(1));for(var p=0;p<c.length;p++){var d=c[p];0<d.length&&d[0]===E.SPECIAL_DATA_PREFIX||s.push(this.addDimension(this.decodeCompressedResource(d,a,t),n))}}else var u=this.decompressResources(i,t,a),s=s.concat(u)}return s},E.isDimensionData=function(e){return e&&e.substring(0,E.SPECIAL_DATA_DIMENSION_PREFIX.length)===E.SPECIAL_DATA_DIMENSION_PREFIX},E.decompressDimension=function(e){var t,r,n={};if(!this.isDimensionData(e))return n;if((t=(e=e.substring(E.SPECIAL_DATA_DIMENSION_PREFIX.length)).split(",")).length<2)return n;for(n.y=0,r=n.x=0;r<t.length;r++)""===t[r]?n[this.REV_DIMENSION_NAMES[r]]=0:n[this.REV_DIMENSION_NAMES[r]]=parseInt(t[r],36);return Object.prototype.hasOwnProperty.call(n,"naturalHeight")||(n.naturalHeight=n.height),Object.prototype.hasOwnProperty.call(n,"naturalWidth")||(n.naturalWidth=n.width),n},E.addDimension=function(e,t){if(!e||!t)return e;for(var r in this.DIMENSION_NAMES)Object.prototype.hasOwnProperty.call(this.DIMENSION_NAMES,r)&&Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},E.getSortedCells=function(e){for(var t=[],r=0;r<e.length;r++)e[r].responseEnd<=e[r].startTime||(t.push({ts:e[r].startTime,val:1}),t.push({ts:e[r].responseEnd,val:-1}));return t.sort(function(e,t){return e.ts-t.ts}),t},E.addCellContributions=function(e){for(var t,r=0,n=[],s=e[0].ts,o=e.length,i={},a=0;a<o;a++)i=e[a],a<o-1&&e[a+1].ts===i.ts?(e[a+1].val+=i.val,n.push(a)):(t=i.val,0<r&&(i.val=(i.ts-s)/r),s=i.ts,r+=t);for(a=n.length-1;0<=a;a--)e.splice(n[a],1);return e},E.sumContributions=function(e,t){if(!t||void 0===t.startTime||void 0===t.responseEnd)return 0;var r=t.startTime+1,n=t.responseEnd;function s(e){return e.ts}for(var o=this.searchSortedFirst(e,{ts:r},s),i=this.searchSortedLast(e,{ts:n},s),a=0,c=o;c<=i;c++)a+=e[c].val;return a},E.addContribution=function(e){if(!e||0===e.length)return e;var t=this.getSortedCells(e);if(t.length<2||t[0].val<1||t[t.length-1].ts<=0)return e;this.addCellContributions(t);for(var r=t[t.length-1].ts,n=0;n<e.length;n++)e[n].contribution=this.sumContributions(t,e[n])/r;return e},E.getInitiatorTypeFromIndex=function(e){return Object.prototype.hasOwnProperty.call(this.REV_INITIATOR_TYPES,e)?this.REV_INITIATOR_TYPES[e]:"other"},E.decodeCompressedResource=function(e,t,r){if(!e||!t)return{};E.HOSTNAMES_REVERSED&&(t=E.reverseHostname(t));for(var n=isNaN(parseInt(e[0],10))?e[0]:parseInt(e[0],10),s=0<(e=1<e.length?e.split(E.SPECIAL_DATA_PREFIX):[]).length&&1<e[0].length?e[0].substring(1).split(","):[],o=1<e.length?e.slice(1):[],i=0;i<s.length;i++)""===s[i]?s[i]=0:s[i]=parseInt(s[i],36);var a=1<=s.length?s[0]:0,c=s.length<10?a:this.decodeCompressedResourceTimeStamp(s,9,a),p={name:t,initiatorType:this.getInitiatorTypeFromIndex(n),startTime:a,redirectStart:0<this.decodeCompressedResourceTimeStamp(s,9,a)?a:0,redirectEnd:this.decodeCompressedResourceTimeStamp(s,9,a),fetchStart:c,domainLookupStart:this.decodeCompressedResourceTimeStamp(s,8,a),domainLookupEnd:this.decodeCompressedResourceTimeStamp(s,7,a),connectStart:this.decodeCompressedResourceTimeStamp(s,6,a),secureConnectionStart:this.decodeCompressedResourceTimeStamp(s,5,a),connectEnd:this.decodeCompressedResourceTimeStamp(s,4,a),requestStart:this.decodeCompressedResourceTimeStamp(s,3,a),responseStart:this.decodeCompressedResourceTimeStamp(s,2,a),responseEnd:this.decodeCompressedResourceTimeStamp(s,1,a)};for(p.duration=0<p.responseEnd?p.responseEnd-p.startTime:0,i=0;i<o.length;i++)this.decompressSpecialData(o[i],p,r);return p},E.decodeCompressedResourceTimeStamp=function(e,t,r){return e&&e.length>=t+1&&0!==e[t]?e[t]+r:0},E.decompressScriptType=function(e,t){var r=parseInt(e,10);for(var n in t=t||{},this.SCRIPT_ATTRIBUTES)Object.prototype.hasOwnProperty.call(this.SCRIPT_ATTRIBUTES,n)&&(t[n]=(r&this.SCRIPT_ATTRIBUTES[n])===this.SCRIPT_ATTRIBUTES[n]);return t},E.decompressLinkAttrType=function(e,t){var r=parseInt(e,10);return t=t||{},Object.prototype.hasOwnProperty.call(this.REV_REL_TYPES,r)&&(t.rel=this.REV_REL_TYPES[r]),t},E.decompressSize=function(e,t){var r,n;for(void 0===t&&(t={}),r=e.split(","),n=0;n<r.length;n++)"_"===r[n]?r[n]=0:(""===r[n]&&(r[n]=0),r[n]=parseInt(r[n],36),0<n&&(r[n]+=r[0]));return 1===r.length&&r.push(r[0]),2===r.length&&r.push(r[0]),t.encodedBodySize=r[0],t.transferSize=r[1],t.decodedBodySize=r[2],t},E.decompressNamespacedData=function(e,t){var r,n,s;return t=t||{},"string"==typeof e&&(0<(r=e.indexOf(":"))&&(n=e.substring(0,r),s=e.substring(r+":".length),t._data=t._data||{},Object.prototype.hasOwnProperty.call(t._data,n)?(Array.isArray(t._data[n])||(t._data[n]=[t._data[n]]),t._data[n].push(s)):t._data[n]=s)),t},E.decompressServiceWorkerData=function(e,t){var r,n;return t=t||{},"string"==typeof e&&(r=e.split(","),n=parseInt(r[0],36),t.workerStart=t.startTime+n,r[1]&&(t.fetchStart=t.startTime+parseInt(r[1],36))),t},E.decompressSpecialData=function(e,t,r){var n;return e&&0!==e.length&&(n=e[0],e=e.substring(1),n===E.SPECIAL_DATA_SIZE_TYPE?t=this.decompressSize(e,t):n===E.SPECIAL_DATA_SCRIPT_TYPE?t=this.decompressScriptType(e,t):n===E.SPECIAL_DATA_SERVERTIMING_TYPE?t=this.decompressServerTimingEntries(r,e,t):n===E.SPECIAL_DATA_LINK_ATTR_TYPE?t=this.decompressLinkAttrType(e,t):n===E.SPECIAL_DATA_NAMESPACED_TYPE?t=this.decompressNamespacedData(e,t):n===E.SPECIAL_DATA_SERVICE_WORKER_TYPE?t=this.decompressServiceWorkerData(e,t):n===E.SPECIAL_DATA_PROTOCOL&&(t=this.decompressNextHopProtocol(e,t))),t},E.reverseHostname=function(e){return e.replace(E.HOSTNAME_REGEX,function(e,t,r,n){return t+E.reverseString(r)+n})},E.reverseString=function(e){for(var t=e.length,r="";t--;)r+=e[t];return r},E.decompressServerTimingEntries=function(t,e,r){return void 0===r&&(r={}),t&&e&&(r.serverTiming=e.split(",").map(function(e){return this.decompressServerTiming(t,e)},this)),r},E.decompressServerTiming=function(e,t){var r,n=t.split(":"),s=Number(n[0]),o=0,i=0;1<n.length&&(""!==(r=n[1].split("."))[0]&&(o=Number(r[0])),1<r.length&&(i=Number(r[1])));var a,c="";return Array.isArray(e[o])?(a=e[o][0],c=e[o][1+i]||""):a=e[o],{name:a,duration:s,description:c}},E.decompressNextHopProtocol=function(e,t){return t=t||{},e?"h1"===e.substr(0,2)?t.nextHopProtocol=e.replace(/^h1/,"http/1"):t.nextHopProtocol=e:t.nextHopProtocol="",t},"function"==typeof define&&define.amd?define([],function(){return E}):"undefined"!=typeof module&&module.exports?module.exports=E:void 0!==t&&(t.ResourceTimingDecompression=E)}("undefined"!=typeof window?window:void 0);