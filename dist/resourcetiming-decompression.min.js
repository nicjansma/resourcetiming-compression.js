!function(e){"use strict";var t,r;"undefined"!=typeof e&&(t=e,r=t.ResourceTimingDecompression);var n={};n.noConflict=function(){return t.ResourceTimingDecompression=r,n},n.INITIATOR_TYPES={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,html:6,image:7},n.DIMENSION_NAMES={height:0,width:1,y:2,x:3},n.getRevMap=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t},n.REV_INITIATOR_TYPES=n.getRevMap(n.INITIATOR_TYPES),n.REV_DIMENSION_NAMES=n.getRevMap(n.DIMENSION_NAMES);var s="*",i="0",o=s+i,d="1",p=/^(https?:\/\/)([^\/]+)(.*)/;n.decompressResources=function(e,t){var r,n=[];t=t||"";for(var i in e)if(e.hasOwnProperty(i)){var o=e[i],d=t+i;if(d.indexOf("|",d.length-1)!==-1&&(d=d.substring(0,d.length-1)),"string"==typeof o){var p=o.split("|");r=void 0,p.length>0&&this.isDimensionData(p[0])&&(r=this.decompressDimension(p[0]),p=p.splice(1));for(var c=0;c<p.length;c++){var u=p[c];u.length>0&&u[0]===s||n.push(this.addDimension(this.decodeCompressedResource(u,d),r))}}else{var a=this.decompressResources(o,d);n=n.concat(a)}}return n},n.isDimensionData=function(e){return e&&e.substring(0,o.length)===o},n.decompressDimension=function(e){var t,r,n={};if(!this.isDimensionData(e))return n;if(e=e.substring(o.length),t=e.split(","),t.length<2)return n;for(r=0;r<t.length;r++)""===t[r]?n[this.REV_DIMENSION_NAMES[r]]=0:n[this.REV_DIMENSION_NAMES[r]]=parseInt(t[r],36);return n},n.addDimension=function(e,t){if(!e||!t)return e;for(var r in this.DIMENSION_NAMES)this.DIMENSION_NAMES.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(e[r]=t[r]);return e},n.getInitiatorTypeFromIndex=function(e){return this.REV_INITIATOR_TYPES.hasOwnProperty(e)?this.REV_INITIATOR_TYPES[e]:"other"},n.decodeCompressedResource=function(e,t){if(!e||!t)return{};t=n.reverseHostname(t);var r=parseInt(e[0],10);e=e.length>1?e.split(s+d):[];for(var i=e.length>0&&e[0].length>1?e[0].substring(1).split(","):[],o=e.length>1?e[1]:"",p=0;p<i.length;p++)""===i[p]?i[p]=0:i[p]=parseInt(i[p],36);var c=i.length>=1?i[0]:0,u=i.length<10?c:this.decodeCompressedResourceTimeStamp(i,9,c),a={name:t,initiatorType:this.getInitiatorTypeFromIndex(r),startTime:c,redirectStart:this.decodeCompressedResourceTimeStamp(i,9,c)>0?c:0,redirectEnd:this.decodeCompressedResourceTimeStamp(i,9,c),fetchStart:u,domainLookupStart:this.decodeCompressedResourceTimeStamp(i,8,c),domainLookupEnd:this.decodeCompressedResourceTimeStamp(i,7,c),connectStart:this.decodeCompressedResourceTimeStamp(i,6,c),secureConnectionStart:this.decodeCompressedResourceTimeStamp(i,5,c),connectEnd:this.decodeCompressedResourceTimeStamp(i,4,c),requestStart:this.decodeCompressedResourceTimeStamp(i,3,c),responseStart:this.decodeCompressedResourceTimeStamp(i,2,c),responseEnd:this.decodeCompressedResourceTimeStamp(i,1,c)};return a.duration=a.responseEnd>0?a.responseEnd-a.startTime:0,o.length>0&&this.decompressSize(o,a),a},n.decodeCompressedResourceTimeStamp=function(e,t,r){return e&&e.length>=t+1&&0!==e[t]?e[t]+r:0},n.decompressSize=function(e,t){var r,n;for("undefined"==typeof t&&(t={}),r=e.split(","),n=0;n<r.length;n++)"_"===r[n]?r[n]=0:(""===r[n]&&(r[n]=0),r[n]=parseInt(r[n],36),n>0&&(r[n]+=r[0]));return 1===r.length&&r.push(r[0]),2===r.length&&r.push(r[0]),t.encodedBodySize=r[0],t.transferSize=r[1],t.decodedBodySize=r[2],t},n.reverseHostname=function(e){return e.replace(p,function(e,t,r,s){return t+n.reverseString(r)+s})},n.reverseString=function(e){for(var t=e.length,r="";t--;)r+=e[t];return r},"function"==typeof define&&define.amd?define([],function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:"undefined"!=typeof t&&(t.ResourceTimingDecompression=n)}("undefined"!=typeof window?window:void 0);