!function(e){"use strict";var t,r;"undefined"!=typeof e&&(t=e,r=t.ResourceTimingDecompression);var s={};s.noConflict=function(){return t.ResourceTimingDecompression=r,s},s.INITIATOR_TYPES={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,html:6};var o="*",n="1";s.decompressResources=function(e,t){var r=[];t=t||"";for(var s in e)if(e.hasOwnProperty(s)){var n=e[s],i=t+s;if(i.indexOf("|",i.length-1)!==-1&&(i=i.substring(0,i.length-1)),"string"==typeof n)for(var d=n.split("|"),c=0;c<d.length;c++){var p=d[c];p.length>0&&p[0]===o||r.push(this.decodeCompressedResource(p,i))}else{var m=this.decompressResources(n,i);r=r.concat(m)}}return r},s.getInitiatorTypeFromIndex=function(e){for(var t in this.INITIATOR_TYPES)if(this.INITIATOR_TYPES[t]===e)return t;return"other"},s.decodeCompressedResource=function(e,t){if(!e||!t)return{};var r=parseInt(e[0],10);e=e.length>1?e.split(o+n):[];for(var s=e.length>0&&e[0].length>1?e[0].substring(1).split(","):[],i=e.length>1?e[1]:"",d=0;d<s.length;d++)""===s[d]?s[d]=0:s[d]=parseInt(s[d],36);var c=s.length>=1?s[0]:0,p=s.length<10?c:this.decodeCompressedResourceTimeStamp(s,9,c),m={name:t,initiatorType:this.getInitiatorTypeFromIndex(r),startTime:c,redirectStart:this.decodeCompressedResourceTimeStamp(s,9,c)>0?c:0,redirectEnd:this.decodeCompressedResourceTimeStamp(s,9,c),fetchStart:p,domainLookupStart:this.decodeCompressedResourceTimeStamp(s,8,c),domainLookupEnd:this.decodeCompressedResourceTimeStamp(s,7,c),connectStart:this.decodeCompressedResourceTimeStamp(s,6,c),secureConnectionStart:this.decodeCompressedResourceTimeStamp(s,5,c),connectEnd:this.decodeCompressedResourceTimeStamp(s,4,c),requestStart:this.decodeCompressedResourceTimeStamp(s,3,c),responseStart:this.decodeCompressedResourceTimeStamp(s,2,c),responseEnd:this.decodeCompressedResourceTimeStamp(s,1,c)};return m.duration=m.responseEnd>0?m.responseEnd-m.startTime:0,i.length>0&&this.decompressSize(i,m),m},s.decodeCompressedResourceTimeStamp=function(e,t,r){return e&&e.length>=t+1&&0!==e[t]?e[t]+r:0},s.decompressSize=function(e,t){var r,s;for("undefined"==typeof t&&(t={}),r=e.split(","),s=0;s<r.length;s++)"_"===r[s]?r[s]=0:(""===r[s]&&(r[s]=0),r[s]=parseInt(r[s],36),s>0&&(r[s]+=r[0]));return 1===r.length&&r.push(r[0]),2===r.length&&r.push(r[0]),t.encodedBodySize=r[0],t.transferSize=r[1],t.decodedBodySize=r[2],t},"function"==typeof define&&define.amd?define([],function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:"undefined"!=typeof t&&(t.ResourceTimingDecompression=s)}("undefined"!=typeof window?window:void 0);