!function(e){"use strict";var t,r;void 0!==e&&(t=e,r=t.ResourceTimingDecompression);var s={};s.noConflict=function(){return t.ResourceTimingDecompression=r,s},s.INITIATOR_TYPES={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,html:6,image:7},s.DIMENSION_NAMES={height:0,width:1,y:2,x:3},s.getRevMap=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t},s.REV_INITIATOR_TYPES=s.getRevMap(s.INITIATOR_TYPES),s.REV_DIMENSION_NAMES=s.getRevMap(s.DIMENSION_NAMES);s.decompressResources=function(e,t){var r,s=[];t=t||"";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],o=t+n;if(-1!==o.indexOf("|",o.length-1)&&(o=o.substring(0,o.length-1)),"string"==typeof i){var d=i.split("|");r=void 0,d.length>0&&this.isDimensionData(d[0])&&(r=this.decompressDimension(d[0]),d=d.splice(1));for(var c=0;c<d.length;c++){var p=d[c];p.length>0&&"*"===p[0]||s.push(this.addDimension(this.decodeCompressedResource(p,o),r))}}else{var m=this.decompressResources(i,o);s=s.concat(m)}}return s},s.isDimensionData=function(e){return e&&"*0"===e.substring(0,"*0".length)},s.decompressDimension=function(e){var t,r,s={};if(!this.isDimensionData(e))return s;if(e=e.substring("*0".length),t=e.split(","),t.length<2)return s;for(r=0;r<t.length;r++)""===t[r]?s[this.REV_DIMENSION_NAMES[r]]=0:s[this.REV_DIMENSION_NAMES[r]]=parseInt(t[r],36);return s},s.addDimension=function(e,t){if(!e||!t)return e;for(var r in this.DIMENSION_NAMES)this.DIMENSION_NAMES.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(e[r]=t[r]);return e},s.getInitiatorTypeFromIndex=function(e){return this.REV_INITIATOR_TYPES.hasOwnProperty(e)?this.REV_INITIATOR_TYPES[e]:"other"},s.decodeCompressedResource=function(e,t){if(!e||!t)return{};t=s.reverseHostname(t);var r=parseInt(e[0],10);e=e.length>1?e.split("*1"):[];for(var n=e.length>0&&e[0].length>1?e[0].substring(1).split(","):[],i=e.length>1?e[1]:"",o=0;o<n.length;o++)""===n[o]?n[o]=0:n[o]=parseInt(n[o],36);var d=n.length>=1?n[0]:0,c=n.length<10?d:this.decodeCompressedResourceTimeStamp(n,9,d),p={name:t,initiatorType:this.getInitiatorTypeFromIndex(r),startTime:d,redirectStart:this.decodeCompressedResourceTimeStamp(n,9,d)>0?d:0,redirectEnd:this.decodeCompressedResourceTimeStamp(n,9,d),fetchStart:c,domainLookupStart:this.decodeCompressedResourceTimeStamp(n,8,d),domainLookupEnd:this.decodeCompressedResourceTimeStamp(n,7,d),connectStart:this.decodeCompressedResourceTimeStamp(n,6,d),secureConnectionStart:this.decodeCompressedResourceTimeStamp(n,5,d),connectEnd:this.decodeCompressedResourceTimeStamp(n,4,d),requestStart:this.decodeCompressedResourceTimeStamp(n,3,d),responseStart:this.decodeCompressedResourceTimeStamp(n,2,d),responseEnd:this.decodeCompressedResourceTimeStamp(n,1,d)};return p.duration=p.responseEnd>0?p.responseEnd-p.startTime:0,i.length>0&&this.decompressSize(i,p),p},s.decodeCompressedResourceTimeStamp=function(e,t,r){return e&&e.length>=t+1&&0!==e[t]?e[t]+r:0},s.decompressSize=function(e,t){var r,s;for(void 0===t&&(t={}),r=e.split(","),s=0;s<r.length;s++)"_"===r[s]?r[s]=0:(""===r[s]&&(r[s]=0),r[s]=parseInt(r[s],36),s>0&&(r[s]+=r[0]));return 1===r.length&&r.push(r[0]),2===r.length&&r.push(r[0]),t.encodedBodySize=r[0],t.transferSize=r[1],t.decodedBodySize=r[2],t},s.reverseHostname=function(e){return e.replace(/^(https?:\/\/)([^\/]+)(.*)/,function(e,t,r,n){return t+s.reverseString(r)+n})},s.reverseString=function(e){for(var t=e.length,r="";t--;)r+=e[t];return r},"function"==typeof define&&define.amd?define([],function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:void 0!==t&&(t.ResourceTimingDecompression=s)}("undefined"!=typeof window?window:void 0);